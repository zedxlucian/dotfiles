#!/bin/sh

XRESOURCES="
Xft.autohint: 0
Xft.antialias: 1
Xft.hinting: true
Xft.hintstyle: hintslight
Xft.dpi: 91
Xft.rgba: rgb
Xft.lcdfilter: lcddefault

/* ST */
st.cwscale: 1.0
st.chscale: 1.0
st.alpha: 0.9

dwm.topbar: 1
dwm.borderpx: 2
dwm.barborder: 2

dmenu.borderpx: 2

/* DARK MODE */
#include \"themes/nord-dark\"
dwm.normbgcolor: nord1
dwm.normfgcolor: nord6
dwm.normbordercolor: nord1

dwm.selfgcolor: nord1
dwm.selbgcolor: nord6
dwm.selbordercolor: nord6

dmenu.background: nord1
dmenu.foreground: nord6
dmenu.selbackground: nord6
dmenu.selforeground: nord1

dmenu.highlightbackground: nord6
dmenu.higlightselbackground: nord6

dmenu.highlightforeground: nord14
dmenu.highlightselforeground: nord14
"

case "$1" in
	light|Light)
		echo "$XRESOURCES" > "$HOME/.config/X11/Xresources" &&
		sed -i 's/DARK/LIGHT/;s/dark/light/' "$HOME/.config/X11/Xresources" &&
		xrdb -merge "$HOME/.config/X11/Xresources" &&
		dwmc reload &&
		kill -s USR1 "$(pidof st)"
		emacsclient -e "(load-theme 'doom-nord-light 'no-confirm)"
		sed -i 's/^\(gtk-theme-name \s*=\s*\).*$/\1"Arc"/' "$HOME/.config/gtk-2.0/gtkrc-2.0"
		sed -i 's/^\(gtk-theme-name \s*=\s*\).*$/\1"WhiteSur-light"/' "$HOME/.config/gtk-3.0/settings.ini"
		shift
		exit 0
		;;

	dark|Dark)
		echo "$XRESOURCES" > "$HOME/.config/X11/Xresources" &&
		sed -i 's/LIGHT/DARK/;s/light/dark/' "$HOME/.config/X11/Xresources" &&
		xrdb -merge "$HOME/.config/X11/Xresources" &&
		dwmc reload &&
		kill -s USR1 "$(pidof st)"
		emacsclient -e "(load-theme 'doom-nord 'no-confirm)"
		sed -i 's/^\(gtk-theme-name \s*=\s*\).*$/\1"Arc"/' "$HOME/.config/gtk-2.0/gtkrc-2.0"
		sed -i 's/^\(gtk-theme-name \s*=\s*\).*$/\1"WhiteSur-Dark"/' "$HOME/.config/gtk-3.0/settings.ini"
		shift
		exit 0
		;;

    toggle)
		if grep -q "DARK MODE" "$HOME/.config/X11/Xresources"
		then
			change_mode light
		else
			change_mode dark
		fi
		shift
		exit 0
		;;

	*)
		echo "Wrong argument, try light or dark"
		shift
		exit 1
esac
